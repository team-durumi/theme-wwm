{{ define "main" }}
{{ partial "base/breadcrumb" . }}
<div class="container pt-12 pb-28">
  <div class="education-finished pt-8">
    <dl class="text-center mb-5">
      <dt class="text-2xl lg:text-4xl text-aa-gray-900 font-bold mb-14">온라인 교육을 완료하였습니다</dt>
      <dd id="nabi-sticker" class="bg-center bg-contain bg-no-repeat flex justify-center items-center">
        <b class="text-2xl lg:text-5xl font-bold text-black" x-text="localStorage.getItem('nabi_message')"></b>
      </dd>
    </dl>
    <div class="text-right">
      <a href="#" id="btn-download--nabi" class="inline-flex justify-between gap-8 mb-4 py-4 px-6 bg-aa-gray-50 border border-aa-gray-200 hover:border-aa-purple-500">
        <span class="text-base text-aa-gray-700">나비 메시지.jpg</span>
        <span class="text-aa-purple-500">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3M3 17V7a2 2 0 012-2h6l2 2h6a2 2 0 012 2v8a2 2 0 01-2 2H5a2 2 0 01-2-2z" />
          </svg>
        </span>
      </a>
    </div>
  </div>
</div>
<script src="https://unpkg.com/dom-to-image@2.6.0/dist/dom-to-image.min.js"></script>
<script>
if ( document.referrer === "" || !localStorage["nabi_message"] ) {
  window.location.href = "/";
}
window.addEventListener('DOMContentLoaded', () => {
  var node = document.getElementById('nabi-sticker')
  domtoimage.toPng(node)
  .then(dataUrl => {
    var btn = document.getElementById('btn-download--nabi')
    btn.download = 'your-navi.png'
    btn.href = dataUrl
  })
  .catch(error => {
    console.error('oops, something went wrong!', error);
  });
})
</script>
{{ end }}